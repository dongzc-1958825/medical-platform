# 覆盖现有的 404.html
@'
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>众创医案平台</title>
    <script>
        // GitHub Pages + HashRouter 最简单的重定向方案
        const currentPath = window.location.pathname;
        
        // 如果是 404.html 页面本身，重定向到首页
        if (currentPath.includes('404.html')) {
            window.location.replace('/medical-platform/');
        } else {
            // 对于其他路径，保存路径并重定向到首页
            sessionStorage.setItem('redirect', currentPath);
            window.location.replace('/medical-platform/');
        }
    </script>
</head>
<body>
    <noscript>
        <p>请启用JavaScript以访问众创医案平台。</p>
        <a href="/medical-platform/">点击这里返回首页</a>
    </noscript>
    <div style="text-align: center; padding: 50px;">
        <h2>正在重定向...</h2>
        <p>如果页面没有自动跳转，<a href="/medical-platform/">请点击这里</a></p>
    </div>
</body>
</html>
'@ | Out-File -FilePath public/404.html -Encoding UTF8

# 复制到 docs 目录
Copy-Item public/404.html docs/404.html -Force

# 提交
git add public/404.html docs/404.html
git commit -m "fix: 简化404.html重定向逻辑"
git push origin main