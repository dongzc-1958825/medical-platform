# åˆ›å»ºæ™ºèƒ½404.html - ä¸“é—¨å¤„ç†HashRouteråˆ·æ–°
@'
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡å®šå‘ä¸­...</title>
    <script>
        // HashRouterä¸“ç”¨åˆ·æ–°å¤„ç†
        console.log('ğŸ”„ 404å¤„ç†å™¨å¯åŠ¨ - HashRouteræ¨¡å¼');
        
        const currentUrl = window.location.href;
        const currentPath = window.location.pathname;
        const currentHash = window.location.hash;
        
        console.log('å½“å‰URL:', currentUrl);
        console.log('è·¯å¾„:', currentPath);
        console.log('Hash:', currentHash);
        
        // é¡¹ç›®åŸºç¡€è·¯å¾„
        const basePath = '/medical-platform';
        
        // æƒ…å†µ1ï¼šå¦‚æœå½“å‰å°±åœ¨404é¡µé¢ï¼Œç›´æ¥å»é¦–é¡µ
        if (currentPath.includes('404.html')) {
            console.log('ğŸ“„ æ˜¯404é¡µé¢æœ¬èº«ï¼Œå»é¦–é¡µ');
            window.location.replace(basePath + '/#/');
            return;
        }
        
        // æƒ…å†µ2ï¼šæ£€æŸ¥URLä¸­æ˜¯å¦åº”è¯¥åŒ…å«hashï¼ˆåŸºäºè·¯å¾„ï¼‰
        // æå–ç”¨æˆ·è¯•å›¾è®¿é—®çš„è·¯å¾„
        let requestedPath = currentPath;
        if (requestedPath.startsWith(basePath)) {
            requestedPath = requestedPath.slice(basePath.length);
        }
        
        console.log('ç”¨æˆ·æƒ³è®¿é—®:', requestedPath);
        
        // åˆ¤æ–­è¿™ä¸ªè·¯å¾„æ˜¯å¦æ˜¯Reactåº”ç”¨çš„æœ‰æ•ˆè·¯ç”±
        const validRoutes = [
            '', '/', '/index.html',            // é¦–é¡µ
            '/cases', '/cases/create',         // åŒ»æ¡ˆç›¸å…³
            '/community',                      // ç¤¾åŒº
            '/help',                           // å¸®åŠ©
            '/messages',                       // æ¶ˆæ¯
            '/profile',                        // ä¸ªäººèµ„æ–™
            '/login',                          // ç™»å½•
            '/consultation/'                   // å’¨è¯¢è¯¦æƒ…ï¼ˆå‰ç¼€åŒ¹é…ï¼‰
        ];
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆè·¯ç”±
        const isValidRoute = validRoutes.some(route => {
            if (route.endsWith('/')) {
                // å‰ç¼€åŒ¹é…ï¼ˆå¦‚/consultation/ï¼‰
                return requestedPath.startsWith(route);
            }
            // ç²¾ç¡®åŒ¹é…
            return requestedPath === route;
        });
        
        if (isValidRoute) {
            // æœ‰æ•ˆè·¯ç”±ï¼šè½¬æ¢ä¸ºhashæ ¼å¼
            const hash = requestedPath === '' || requestedPath === '/' ? '#/' : '#' + requestedPath;
            const targetUrl = basePath + '/' + hash;
            console.log('âœ… æœ‰æ•ˆè·¯ç”±ï¼Œé‡å®šå‘åˆ°:', targetUrl);
            window.location.replace(targetUrl);
        } else {
            // æ— æ•ˆè·¯ç”±ï¼šå»é¦–é¡µ
            console.log('âŒ æ— æ•ˆè·¯ç”±ï¼Œå»é¦–é¡µ');
            window.location.replace(basePath + '/#/');
        }
    </script>
</head>
<body>
    <noscript>
        <div style="text-align: center; padding: 50px;">
            <h2>è¯·å¯ç”¨JavaScript</h2>
            <a href="/medical-platform/">è¿”å›é¦–é¡µ</a>
        </div>
    </noscript>
    <div style="text-align: center; padding: 50px;">
        <h2>æ­£åœ¨é‡æ–°åŠ è½½åº”ç”¨...</h2>
        <p>è¯·ç¨å€™</p>
    </div>
</body>
</html>
'@ | Out-File -FilePath docs/404.html -Encoding UTF8 -Force