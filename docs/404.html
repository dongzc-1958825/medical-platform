# 终极版404.html - 100%有效
@'
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>重定向</title>
    <script>
        // 终极方案：无论什么情况，都重定向到让React处理
        const currentPath = window.location.pathname;
        const currentHash = window.location.hash;
        
        console.log('404页面触发，路径:', currentPath, 'Hash:', currentHash);
        
        // 项目基础路径
        const base = '/medical-platform';
        
        // 情况1：如果URL中已经有hash，保持它
        if (currentHash) {
            console.log('情况1：有Hash，重定向到:', base + currentHash);
            window.location.replace(base + currentHash);
        }
        // 情况2：如果是404页面本身
        else if (currentPath.includes('404')) {
            console.log('情况2：404页面本身，去首页');
            window.location.replace(base + '/#/');
        }
        // 情况3：其他所有路径
        else {
            // 提取路径：/medical-platform/about -> /about
            let path = currentPath;
            if (path.startsWith(base)) {
                path = path.slice(base.length);
            }
            
            // 构建hash：/about -> #/about
            const hash = path === '/' || path === '' ? '#/' : '#/' + path.replace(/^\//, '');
            console.log('情况3：路径转Hash，重定向到:', base + '/' + hash);
            window.location.replace(base + '/' + hash);
        }
    </script>
</head>
<body>
    正在重定向...
</body>
</html>
'@ | Out-File -FilePath docs/404.html -Encoding UTF8 -Force